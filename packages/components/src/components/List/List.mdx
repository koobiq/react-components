import {
  Meta,
  Story,
  Props,
  Status,
} from '../../../../../.storybook/components';

import * as Stories from './List.stories';

<Meta of={Stories} />

# List

<Status variant="experimental" />

List displays a list of options and allows a user to select one or more of them.

```tsx
import { List } from '@koobiq/react-components';
```

<Story of={Stories.Base} />

## Props

<Props />

## Subcomponents

The component has the following helper components:

- `List.Item` — list item component.
- `List.Section` — a group of items.
- `List.Divider` — list divider component
- `List.ItemText` — a component to show text in an item.

## Usage

List consists of a container element, with a list of items or sections inside.
Users can select one or more items by clicking, tapping, or navigating with the keyboard.

```tsx
import { List } from '@koobiq/react-components';

<List>
  <List.Item>
    <List.ItemText caption="description">label</List.ItemText>
  </List.Item>
  <List.Section label="group">
    <List.Item>
      <List.ItemText caption="description">label</List.ItemText>
    </List.Item>
  </List.Section>
</List>;
```

## Content

List accepts static and dynamic collections. The examples above show static collections,
which can be used when the full list of options is known ahead of time.
Dynamic collections, as shown below, can be used when the options come from an external data
source such as an API call, or update over time.

As seen below, an iterable list of options is passed to the `List` using the `items` prop.
Each item accepts an `key` prop, which is passed to the `onSelectionChange` handler to identify the selected item.
Alternatively, if the item objects contain an id property, as shown in the example below, then this is used automatically and an `key` prop is not required.

<Story of={Stories.DynamicCollections} />

## Selection

List supports multiple selection modes.
By default, selection is disabled, however this can be changed using the `selectionMode` prop.

Use `defaultSelectedKeys` to provide a default set of selected items (uncontrolled) and `selectedKeys`
to set the selected items (controlled). The value of the selected keys must match the `key` prop of the items.

<Story of={Stories.SelectionStory} />

## Disabled items

List supports marking items as disabled using the `disabledKeys` prop.
Each key in this list corresponds with the `key` prop passed to the `List.Item` component,
or automatically derived from the values passed to the items prop.

<Story of={Stories.DisabledItems} />

## Links

By default, interacting with an item in a List triggers `onSelectionChange`.
Alternatively, items may be links to another page or website. This can be achieved
by passing the `href` prop to the `List.Item` component.

<Story of={Stories.Links} />

## No items

If no items are available, the component shows a message in the list.
You can customize this message — either as plain text or a component — using the `noItemsText` prop.

<Story of={Stories.NoItems} />

## Loading

The component can display a loading indicator inside the list using the `isLoading` prop.
You can customize this message — either as plain text or as a custom component — using the `loadingText` prop.

<Story of={Stories.Loading} />

## Asynchronous Loading

List supports loading data asynchronously, and will display a progress circle when the `isLoading` prop is set.
It also supports infinite scrolling to load more data on demand as the user scrolls, via the `onLoadMore` prop.

<Story of={Stories.AsynchronousLoading} />

## Client side routing

The `List` component works with frameworks and client side routers like **Next.js** and **React Router**.
As with other Koobiq React components that support links, this works via the `RouterProvider` component at the root of your app.

```tsx
import { useRouter } from 'next/navigation';

import { RouterProvider } from '@koobiq/react-components';

export default function App() {
  const router = useRouter();

  return (
    <RouterProvider navigate={router.push}>
      <List aria-label="pages">
        <List.Item href="/page1">Page 1</List.Item>
        <List.Item href="/page2">Page 2</List.Item>
        <List.Item href="/page3">Page 3</List.Item>
      </List>
    </RouterProvider>
  );
}
```

## Sections

List supports sections with headings in order to group options.
Sections can be used by wrapping groups of `List.Item` in a `List.Section` component.
Each `List.Section` takes a `title` and `key` prop.

<Story of={Stories.Sections} />

## Other examples

<Story of={Stories.OtherExamples} />
